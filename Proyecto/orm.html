<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ORM | AscoDeCódigo</title>
    <meta name="description" content="Curso de Hapi.js">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/hapi-course/assets/css/0.styles.befdd7ec.css" as="style"><link rel="preload" href="/hapi-course/assets/js/app.95ff4be1.js" as="script"><link rel="preload" href="/hapi-course/assets/js/2.1a781ee6.js" as="script"><link rel="preload" href="/hapi-course/assets/js/9.f95726ed.js" as="script"><link rel="prefetch" href="/hapi-course/assets/js/10.2621dd6f.js"><link rel="prefetch" href="/hapi-course/assets/js/11.6c96a440.js"><link rel="prefetch" href="/hapi-course/assets/js/12.d7d8febc.js"><link rel="prefetch" href="/hapi-course/assets/js/13.4128593e.js"><link rel="prefetch" href="/hapi-course/assets/js/14.ee505f55.js"><link rel="prefetch" href="/hapi-course/assets/js/15.f9d29e8d.js"><link rel="prefetch" href="/hapi-course/assets/js/16.fb4f68ce.js"><link rel="prefetch" href="/hapi-course/assets/js/17.0cac0366.js"><link rel="prefetch" href="/hapi-course/assets/js/18.d7884a88.js"><link rel="prefetch" href="/hapi-course/assets/js/19.a3968107.js"><link rel="prefetch" href="/hapi-course/assets/js/3.a5acad2c.js"><link rel="prefetch" href="/hapi-course/assets/js/4.88c051ba.js"><link rel="prefetch" href="/hapi-course/assets/js/5.e1cb6658.js"><link rel="prefetch" href="/hapi-course/assets/js/6.25cdb12b.js"><link rel="prefetch" href="/hapi-course/assets/js/7.22afa0e2.js"><link rel="prefetch" href="/hapi-course/assets/js/8.6828c0a5.js">
    <link rel="stylesheet" href="/hapi-course/assets/css/0.styles.befdd7ec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hapi-course/" class="home-link router-link-active"><img src="/hapi-course/img/ADC.png" alt="AscoDeCódigo" class="logo"> <span class="site-name can-hide">AscoDeCódigo</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hapi-course/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/hapi-course/Introducción/" class="nav-link">
  Introducción
</a></div><div class="nav-item"><a href="/hapi-course/ConceptosAvanzados/" class="nav-link">
  Avanzado
</a></div><div class="nav-item"><a href="/hapi-course/Resources/" class="nav-link">
  Resources
</a></div><div class="nav-item"><a href="/hapi-course/Proyecto/" class="nav-link router-link-active">
  Proyecto
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hapi-course/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/hapi-course/Introducción/" class="nav-link">
  Introducción
</a></div><div class="nav-item"><a href="/hapi-course/ConceptosAvanzados/" class="nav-link">
  Avanzado
</a></div><div class="nav-item"><a href="/hapi-course/Resources/" class="nav-link">
  Resources
</a></div><div class="nav-item"><a href="/hapi-course/Proyecto/" class="nav-link router-link-active">
  Proyecto
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/hapi-course/Proyecto/" class="sidebar-link">Proyecto</a></li><li><a href="/hapi-course/Proyecto/docker.html" class="sidebar-link">Docker</a></li><li><a href="/hapi-course/Proyecto/orm.html" class="active sidebar-link">ORM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hapi-course/Proyecto/orm.html#sequelize" class="sidebar-link">Sequelize</a></li><li class="sidebar-sub-header"><a href="/hapi-course/Proyecto/orm.html#configuracion-de-sequelize" class="sidebar-link">Configuración de Sequelize</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="orm"><a href="#orm" class="header-anchor">#</a> ORM</h1> <p>Un ORM es un modelo de programación que permite mapear las estructuras de una base de datos relacional (SQL Server, Oracle, MySQL, etc.), en adelante RDBMS (Relational Database Management System), sobre una estructura lógica de entidades con el objeto de simplificar y acelerar el desarrollo de nuestras aplicaciones.</p> <h2 id="sequelize"><a href="#sequelize" class="header-anchor">#</a> Sequelize</h2> <br> <img src="/hapi-course/assets/img/seq.0cc16e15.png" height="200" width="200"> <p>Sequelize es un ORM para Nodejs que nos permite manipular varias bases de datos SQL de una manera bastante sencilla, entre estas bases de datos podemos encontrar: mysql, sqlite, postgres, mssql.</p> <h3 id="instalacion"><a href="#instalacion" class="header-anchor">#</a> Instalación</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">npm</span> i -S pg pg-hstore sequelize
<span class="token function">sudo</span> <span class="token function">npm</span> i -D sequelize-cli 
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Use -g para instalar globalmente sequelize-cli</p> <p>Sequelize-cli nos sirve para ejecutar comandos del ORM en la terminal</p></div> <h2 id="configuracion-de-sequelize"><a href="#configuracion-de-sequelize" class="header-anchor">#</a> Configuración de Sequelize</h2> <h3 id="crear-archivo-de-configuracion"><a href="#crear-archivo-de-configuracion" class="header-anchor">#</a> Crear archivo de configuracion</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">touch</span> .sequelizerc
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Aqui se configuran los path's para las migraciones, modelos, seeders y el config.json</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'config'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">,</span> <span class="token string">'pg-config.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'migrations-path'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">,</span> <span class="token string">'pg-migrations'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'seeders-path'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">,</span> <span class="token string">'pg-seeders'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'models-path'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">,</span> <span class="token string">'pg-models'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="iniciamos-sequelize"><a href="#iniciamos-sequelize" class="header-anchor">#</a> Iniciamos sequelize</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>sequelize init
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Aqui se configura el config.json según nuestro caso</p></div> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;database&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CursoHapi&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dialect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5434&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;database&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CursoHapitest&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dialect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5434&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;database&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CursoHapidev&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dialect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5434&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="creamos-la-base-de-datos"><a href="#creamos-la-base-de-datos" class="header-anchor">#</a> Creamos la base de datos</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>sequelize db:create --env production 
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Al --env se le pasa como argumento la variable a usar del config.json</p></div> <h3 id="creamos-un-modelo"><a href="#creamos-un-modelo" class="header-anchor">#</a> Creamos un modelo</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>sequelize model:generate --name User --attributes name:string,email:string,password:string
</code></pre></div><h3 id="ejecutamos-las-migraciones"><a href="#ejecutamos-las-migraciones" class="header-anchor">#</a> Ejecutamos las migraciones</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>sequelize db:migrate --env production
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Nota</p> <p>Al --env se le pasa como argumento la variable a usar del config.json</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hapi-course/Proyecto/docker.html" class="prev">
        Docker
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hapi-course/assets/js/app.95ff4be1.js" defer></script><script src="/hapi-course/assets/js/2.1a781ee6.js" defer></script><script src="/hapi-course/assets/js/9.f95726ed.js" defer></script>
  </body>
</html>
